{% extends "base.html" %}

{% block content %}
<div class="table-container">
    <h2 style="margin-bottom: 20px;">{{ page_title }}</h2>
    
    <div style="background: #f0f0f0; padding: 20px; border-radius: 6px; margin-bottom: 30px;">
        <h3 style="margin-top: 0;">ğŸ“‹ DÃ©tails de l'ajustement</h3>
        
        <p><strong>EmployÃ© :</strong> {{ adjustment.timesheet.employee.user.get_full_name }}</p>
        <p><strong>PÃ©riode :</strong> {{ adjustment.timesheet.month }}/{{ adjustment.timesheet.year }}</p>
        <p><strong>Ajustement d'heures :</strong> 
            {% if adjustment.hours_adjustment > 0 %}
                <span style="color: green; font-weight: bold;">+{{ adjustment.hours_adjustment }}h</span>
            {% else %}
                <span style="color: red; font-weight: bold;">{{ adjustment.hours_adjustment }}h</span>
            {% endif %}
        </p>
        <p><strong>Raison :</strong> {{ adjustment.reason }}</p>
        <p><strong>Statut :</strong> <span style="background: #fff3cd; padding: 3px 8px; border-radius: 3px;">En attente</span></p>
        <p><strong>CrÃ©Ã© le :</strong> {{ adjustment.created_at|date:"d/m/Y H:i" }}</p>
    </div>
    
    <form method="POST" style="margin-bottom: 30px;">
        {% csrf_token %}
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
                <h3 style="margin-top: 0; color: green;">âœ… Approuver l'ajustement</h3>
                <p style="color: #666; margin-bottom: 15px;">Validez cet ajustement d'heures</p>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Notes (optionnel)</label>
                    <textarea name="notes" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="Notes d'approbation..."></textarea>
                </div>
                
                <button type="submit" name="action" value="approve" class="btn" style="background-color: #28a745; width: 100%;">âœ… Approuver</button>
            </div>
            
            <div>
                <h3 style="margin-top: 0; color: red;">â›” Rejeter l'ajustement</h3>
                <p style="color: #666; margin-bottom: 15px;">Refusez cet ajustement d'heures</p>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600;">Motif du rejet</label>
                    <textarea name="notes" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="Expliquez pourquoi cet ajustement est rejetÃ©..."></textarea>
                </div>
                
                <button type="submit" name="action" value="reject" class="btn btn-secondary" style="background-color: #dc3545; width: 100%; color: white;">â›” Rejeter</button>
            </div>
        </div>
    </form>
    
    <a href="/timesheets/" class="btn btn-secondary" style="display: inline-block;">âŒ Annuler</a>
</div>
{% endblock %}
